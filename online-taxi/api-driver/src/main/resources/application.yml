# Application name and authentication
spring:
  application:
    name: api-driver
    admin:
      enabled: true
  redis:
    database: 0
    host: ${REDIS_HOST:127.0.0.1}
    port: ${REDIS_PORT:6379}
    timeout: 2000

  # Zipkin distributed tracing
  zipkin:
    base-url: ${ZIPKIN_URL:http://localhost:9411/}
    # Sampling rate: 1 = 100%, 0.1 = 10%
  sleuth:
    sampler:
      rate: 1
# Service registry
eureka:
  client:
    # Set service registry URL
    service-url:
      defaultZone: http://${EUREKA_USER:admin}:${EUREKA_PASSWORD:changeme}@${EUREKA_HOST:eureka-7900}:7900/eureka/
    enabled: false

# Custom Ribbon load balancing (commented out)
#service-sms:
#  ribbon:
#    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule
#    eureka:
#      enable: false
#    listOfServers: localhost:8004,localhost:8005

# Standard Ribbon load balancing (commented out)
#SERVICE-SMS:
#  ribbon:
#    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule
#    # Custom load balancing strategy
#    NFLoadBalancerRuleClassName: com.online.taxi.driver.ribbonconfig.MsbRandomRule

#service-valuation:
#  ribbon:
#    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule

ribbon:
  eager-load:
    enabled: true
    clients:
    - SERVICE-SMS
    - SERVICE-VERIFICATION-CODE
#  http:
#    client:
#      enabled: false
#  okhttp:
#    enabled: false

# Admin monitoring
management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      # Default is never
      show-details: ALWAYS
      enabled: true

logging:
  level:
    root: info
    org.springframework: info

---
spring:
  profiles: 9002
# Service port
server:
  port: 9002
---
spring:
  profiles: 9003
# Service port
server:
  port: 9003
