# Service port
server:
  port: 8012

# Application name and configuration
spring:
  application:
    name: service-passenger-user
  datasource: # Database connection configuration
    # Data source type
    type: com.alibaba.druid.pool.DruidDataSource
    # MySQL driver class
    driver-class-name: com.mysql.cj.jdbc.Driver
    # Database connection URL
    url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME_THREE:online-taxi-three}?characterEncoding=UTF-8&serverTimezone=Asia/Shanghai
    # Database username
    username: ${DB_USER:root}
    # Database password
    password: ${DB_PASSWORD:changeme}
    # Database connection pool configuration
    dbcp2:
      # Initial number of connections
      initial-size: 5
      # Minimum idle connections
      min-idle: 5
      # Maximum number of connections
      max-total: 5
      # Maximum wait time for connection
      max-wait-millis: 200
      # Validate database connection
      validation-query: SELECT 1
      test-while-idle: true
      test-on-borrow: false
      test-on-return: false


# MyBatis configuration
mybatis:
#  # MyBatis config file path
#  config-location: classpath:mybatis/mybatis.cfg.xml
#  # Package alias for entity classes
#  type-aliases-package: com.online.taxi.common
  # Mapper XML file locations
  mapper-locations:
    - classpath:mybatis/mapper/*.xml

# Service registry
eureka:
  client:
    # Set service registry URL
    service-url:
      defaultZone: http://${EUREKA_USER:admin}:${EUREKA_PASSWORD:changeme}@${EUREKA_HOST:eureka-7900}:7900/eureka/
  instance:
    # Heartbeat interval in seconds
    lease-renewal-interval-in-seconds: 1
    # Service expiration time - instance removed if no heartbeat received within this period
    lease-expiration-duration-in-seconds: 1
    hostname: localhost
    prefer-ip-address: true
    # Eureka registry info URL
    status-page-url: /actuator/info
    # Health check URL
    health-check-url-path: /actuator/health
    instance-id: service-passenger-user
    metadata-map:
      user.name: ${EUREKA_USER:admin}
      user.password: ${EUREKA_PASSWORD:changeme}

# Admin monitoring
management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: ALWAYS
