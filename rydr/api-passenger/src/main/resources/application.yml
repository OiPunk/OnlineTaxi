# Service port
server:
  port: 9011

# Application name and authentication
spring:
  application:
    name: api-passenger
    admin:
      enabled: true
  redis:
    database: 0
    host: ${REDIS_HOST:127.0.0.1}
    port: ${REDIS_PORT:6379}
    timeout: 2000

  # Zipkin distributed tracing
  zipkin:
    base-url: ${ZIPKIN_URL:http://localhost:9411/}
    # Sampling rate: 1 = 100%
  sleuth:
    sampler:
      rate: 1
# Service registry
eureka:
  client:
    # Set service registry URL
    service-url:
      defaultZone: http://${EUREKA_USER:admin}:${EUREKA_PASSWORD:changeme}@${EUREKA_HOST:eureka-7900}:7900/eureka/
    enabled: false
  instance:
    hostname: localhost
    instance-id: api-passenger

feign:
  compression:
    request:
      mime-types:
      - text/xml
      min-request-size: 2048
  # Enable Feign Hystrix circuit breaker
  hystrix:
    enabled: true

  client:
    config:
      service-valuation:
#        request-interceptors:
#        - com.rydr.passenger.feign.interceptor.MyBasicAuthRequestInterceptor
        connect-timeout: 5000
        read-timeout: 5000
        logger-level: basic

#service-sms:
#  ribbon:
#    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule
service-valuation:
  ribbon:
    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule
ribbon:
  eager-load:
    enabled: false
    clients:
    - SERVICE-SMS


# Admin monitoring
management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      # Default is never
      show-details: ALWAYS
      enabled: true

logging:
  level:
    org.springframework: DEBUG
    com.rydr.passenger.feign.ServiceForecast: debug
